<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solitaire</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="intro">
        <div class="image-container">
            <img src="images/cards.webp" alt="alt">
        </div>
        <span>Welcome To Our Game !</span>
      </div>
      
<h1>ğŸ† Leaderboard</h1>

<form id="scoreForm">
<label for="name">Name:</label>
<input type="text" id="name" name="name" required>

<label for="score">Score:</label>
<input type="number" id="score" name="score" required>

<button type="submit">Add Score</button>
</form>

<p id="message"></p>

<table id="leaderboardTable">
<thead>
<tr>
<th>Rank</th>
<th>Name</th>
<th>Score</th>
<th>Duration</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>

function loadLeaderboard() {
axios.get('../backend/get_score.php')
.then(res => {
const tbody = document.querySelector('#leaderboardTable tbody');
tbody.innerHTML = '';

res.data.forEach(player => {
const tr = document.createElement('tr');
tr.innerHTML = `
<td>${player.rank}</td>
<td>${player.name}</td>
<td>${player.score}</td>
<td>${player.duration}</td>
`;
tbody.appendChild(tr);
});
})
.catch(err => console.error('Error loading leaderboard:', err));
}

loadLeaderboard();

document.getElementById('scoreForm').addEventListener('submit', function(e) {
e.preventDefault();

const formData = new FormData(this);

axios.post('../backend/add_score.php', formData)
.then(res => {
if (res.data === "success") {
document.getElementById('message').textContent = "âœ… Score added successfully!";
this.reset();
loadLeaderboard();
} else {
document.getElementById('message').textContent = "âŒ Error adding score: " + res.data;
}
})
.catch(err => {
document.getElementById('message').textContent = "âŒ Error adding score";
console.error(err);
});
});
</script>

</body>
</html>